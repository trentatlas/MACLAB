
- rescue
  - /etc/fstab
  - password root and student

-- resize NVME DRIVE

-- setup networking and hostname
rhelsrv1
ens160 192.168.192.201/24 drop
ens256 10.199.25.201/24 internal - disable IPv6

rhelsrv2
ens160 192.168.192.202/24 drop
ens256 10.199.25.202/24 internal - disable IPv6

- #firewall-cmd --get-default-zone
- #firewall-cmd --state

- #firewall-cmd --change-interface=ens160 --zone=drop --permanent
- #firewall-cmd --change-interface=ens256 --zone=internal --permanent
- #firewall-cmd --reload
- #firewall-cmd --list-all --zone=drop
- #firewall-cmd --list-all --zone=internal

- CONFIGURE  SSH to listen on INTERNAL port 2222/tcp
 - #firewall-cmd --state
 - #firewall-cmd --add-port=2222/tcp --zone=internal --permanent
 - #firewall-cmd --reload
 - #firewall-cmd --list-all --zone=internal
 - /etc/ssh/sshd_config
   - ListenAddress 10.199.25.201
   - semanage port -a -t ssh_port_t -p tcp 2222
   - edit restart [Service] from 42 to 18 

-- CONFIGURE SSH to run on port 2222/tcp

  #firewall-cmd  --add-port=2222/tcp --zone=drop --permanent
  #firewall-cmd --reload

  # vim /etc/ssh/sshd_config
  # semanage port -a -t ssh_port_t -p tcp #PORTNUMBER
  #
  Port 2222

  #semanage port -a -t ssh_port_t -p tcp 2222
  #systemctl reboot

- PERSISTIST JOURNALD
  #mkdir -p /var/log/journal
  #systemctl restart systemd-journal-flush.service 
 

- Configure Apache 
- /dev/sda
create WWWVG 
# pvcreate /dev/sda
# vgcreate WWWVG /dev/sda


lv 75% of VG

# lvcreate -n VARWWWLV -l75%FREE WWWVG
# lvs WWWVG
  LV       VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  VARWWWLV WWWVG -wi-a----- <13.50g   



install httpd
Listen IP:80 DMZ IP - Not Internal


# firewall-cmd --add-service=http --zone=drop --permanent
# firewall-cmd --reload
# firewall-cmd --list-all --zone=drop

201 - index.html west.external
202 - index.html east.external


trent$ curl http://west.external
west.external

trent$ curl http://east.external
east.external



-- install 
   chrony, tar, which, yggdrasil virt-what
   rsync, vim , bash complete

   #dnf install chrony tar which virt-what rsync vim git 
   #dnf install bash-completion

-- install SELINUX TOOLS
   #dnf install selinux-policy policycoreutils setools setroubleshoot setroubleshoot-server

- patch and set TZ

# timedatectl set-timezone US/Alaska
# date
# systemctl reboot



-- PULL GIT

   - git clone https://github.com/trentatlas/RHCSA-v10.git
   - git clone https://github.com/trentatlas/REDDAWN.git
   - git clone https://github.com/sandervanvugt/rhcsa10.git 
   - git clone https://github.com/sandervanvugt/rhcsa9.git
   - git clone https://github.com/trentatlas/MACLAB.git
 
-- install desktop and change default target from multi to graphical

   dnf group list 
   dnf group list --hidden
   #dnf groupinstall GNOME
   # dnf groupinstall "Graphical Administration Tools"
   #systemctl set-default graphical.target 
   # dnf remove firefox
   # loginctl enable-linger student
   #systemctl reboot

- Section II 


create users
-FLATPAK - practice practice practice
+8G /home
+8G /var

-t student member of wheel/sudo
 flatpak install firefox, available to all users


-- intern not member of wheel/ no sudo
 install Chromium, only for intern
 
https://github.com/trentatlas/RHCSA-v10.git
https://github.com/trentatlas/MACLAB.git
https://github.com/trentatlas/REDDAWN.git 


$ mkdir -p .config/flatpak
$ flatpak remote-add --no-gpg-verify --if-not-exists flathup --user  https://dl.flathub.org/repo/flathub.flatpakrepo
$ flatpak list 
$ flatpak search Chromium
$ flatpak install --user io.github.ungoogled_software.ungoogled_chromium
$ flatpak list
$ flatpak run io.github.ungoogled_software.ungoogled_chromium 2> /dev/null

 

-- allow ICMP and drop  timestamp in DROP ZONE

   timestamp-reply
   timestamp-request


   firewall-cmd --add-protocol=icmp --zone=drop --permanent
   firewall-cmd reload 

   firewall-cmd --add-icmp-drop=timestamp-request --zone=drop --permanent
   firewall-cmd --add-icmp-drop=timestamp-reply --zone=drop --permanent
   firewall-cmd --reload
   firewall-cmd --list-all --zone=drop 



 -- CONFIGURE chrony logging and change TZ to Alaska
# timedatectl set-timezone US/Alaska
# date
Sat Jan  3 09:52:53 AM AKST 2026


- disable kdump  and mask service
grubby --update-kernel ALL --remove-args "crashkernel=2G-4G:256M,4G-64G:320M,64G-:576M"
grub2-mkconfig -o /boot/grub2/grub.cfg 

# systemctl list-unit-files | egrep kdump
kdump.service   

# systemctl disable kdump
Removed '/etc/systemd/system/multi-user.target.wants/kdump.service'.

# systemctl mask kdump
Created symlink '/etc/systemd/system/kdump.service' → '/dev/null'.




-- CRON
# man 5 crontab

create script that redirect STDOUT and STDERR to two different files in /tmp/
runs every two minutes

*/2 * * * * /usr/local/sbin/ECHO_DATE_TMP.SH 2> /tmp/date_error 1> /tmp/date_time

# cat /tmp/date_time 
Sat Jan  3 10:18:01 AM AKST 2026

# cat /tmp/date_error 
/usr/local/sbin/ECHO_DATE_TMP.SH: line 5: fhjkkjhkjsahddf: command not found




- SELINUX

install apache
run port 8082
/u/www/html

# semanage port -l
# semanage port -l | egrep http_port_t
http_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000
http_port_t                    udp      80, 443

# egrep seman /etc/ssh/sshd_config
# semanage port -a -t ssh_port_t -p tcp #PORTNUMBER

# semanage port -l | egrep ssh
ssh_port_t                     tcp      2222, 22

STEPS
# semanage port -a -t http_port_t -p tcp 8082
# semanage port -l | egrep http_port_t
http_port_t                    tcp      8082, 80, 81, 443, 488, 8008, 8009, 8443, 9000

# egrep Listen /etc/httpd/conf/httpd.conf 
Listen 192.168.192.201:8082

# firewall-cmd --add-port=8082/tcp --zone=drop --permanent
# firewall-cmd --reload
# systemctl restart httpd

man semanage-fcontext

# semanage fcontext -a -t httpd_sys_content_t "/u/www(/.*)?"
# restorecon -R -v /u/www

trent$ curl http://west.external:8082/
west.external /u/www/html



-- WEB nginx

dnf install nginx
cd /usr/share/nginx/html 
rm -f index.html
vim index.html
cd /etc/nginx/
vim nginx.conf
systemctl enable --now nginx

trent$ curl http://west.external
nginx INDEX - WEST

-- AUTOFS
bastion host is servering NFS 

# dnf install nfs-utils rpcbind
# dnf install autofs
# systemctl enable --now nfs-server.service
# systemctl enable --now rpcbind.service
# systemctl enable --now autofs.service

# showmount -e bastion
Export list for bastion:
/var/www *
/home    *
/nfsrepo *


Configure /nfsrepo REPO to install htop nmon iftop

# vim /etc/auto.master
/misc   /etc/auto.misc
/nfsrepo        /etc/nfsrepo.misc

# vim /etc/nfsrepo.misc
# cat /etc/nfsrepo.misc
repo -ro        bastion:/nfsrepo

# systemctl restart autofs.service
# systemctl daemon-reload

# df -h
bastion:/nfsrepo            8.0G  4.8G  3.2G  61% /nfsrepo/repo
# cd /nfsrepo/repo

# ls -l /nfsrepo/repo/
total 0
lrwxrwxrwx. 1 root   root   36 Jan  3 14:52 extensions -> rhel-10-for-aarch64-extensions-rpms/
-rw-r--r--. 1 root   root    0 Sep 16 16:23 NFS.FILE
drwxr-xr-x. 4 apache apache 38 Jan  2 09:52 rhel-10-for-aarch64-extensions-rpms

# dnf config-manager --add-repo=file:///nfsrepo/repo/extensions/

# dnf install htop nmon iftop

mkdir -p  /u/collect
cd /u/collect/
nmon -ft -s 3  -c 96
creats CSV file!

- /export/home NFS

useradd -c "Trent" -s /bin/bash trent
passwd trent
usermod -d /export/home/trent trent


/export/home/trent
root@rhelsrv1:~# cat /etc/export.misc 
home -rw        bastion:/home

trent@rhelsrv1:~$ pwd
/export/home/trent
trent@rhelsrv1:~$ id
uid=1001(trent) gid=1001(trent) groups=1001(trent)

# df -h /export/home
Filesystem      Size  Used Avail Use% Mounted on
bastion:/home   3.0G  210M  2.8G   7% /export/home

- DISKS

- SDA
use remainder of DISK for ROOTVG



-SDB  
 #pvcreate /dev/sdb
 # vgcreate VGB /dev/sdb
 create /opt/logs/ 25% of VGB xfs with LABEL
 #lvcreate -l25%FREE -n OPTLOGSLV VGB

 # lsblk /dev/sdb
 NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
 sdb               8:16   1 29.7G  0 disk 
 └─VGB-OPTLOGSLV 253:9    0  7.4G  0 lvm  

 /etc/fstab
 LABEL="OPTLOGSLV" /opt/logs	xfs	defaults 0 0



- SDC
parted
make gpt partition


make 10G optapp 
(parted) mkpart OPTAPP
File system type?  [ext2]? xfs                                            
Start? 1                                                                  
End? 10G                                                                  
(parted) print                                                            
Model: SanDisk SDDR-B531 (scsi)
Disk /dev/sdc: 31.9GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name    Flags
 1      1049kB  10.0GB  9999MB  xfs          OPTAPP



mkpart 10 OPTORACLE ext4
(parted) mkpart OPTORACLE                                                 
File system type?  [ext2]? ext4                                           
Start? 10G                                                                
End? '20G                                                                 
(parted) print
Model: SanDisk SDDR-B531 (scsi)
Disk /dev/sdc: 31.9GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name       Flags
 1      1049kB  10.0GB  9999MB  xfs          OPTAPP
 2      10.0GB  20.0GB  9999MB  ext4         OPTORACLE

(parted)                                            


(parted) mkpart THEEND
File system type?  [ext2]? xfs                                            
Start? 20G
End? -1s
Warning: You requested a partition from 20.0GB to 31.9GB (sectors 39062500..62333951).
The closest location we can manage is 20.0GB to 31.9GB (sectors 39061504..62333918).
Is this still acceptable to you?
Yes/No? Yes                                                               
(parted) print                                                            
Model: SanDisk SDDR-B531 (scsi)
Disk /dev/sdc: 31.9GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name       Flags
 1      1049kB  10.0GB  9999MB               OPTAPP
 2      10.0GB  20.0GB  9999MB               OPTORACLE
 3      20.0GB  31.9GB  11.9GB  xfs          THEEND

(parted)                                                
 

